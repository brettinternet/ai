---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

vars:
  REPO_COMMANDS_DIR: "{{.ROOT_DIR}}/.claude/commands"
  USER_COMMANDS_DIR: $HOME/.claude/commands

tasks:
  setup-user:
    desc: Setup commands for user
    cmds:
      - mkdir -p {{.USER_COMMANDS_DIR}}
      - task: copy-commands

  copy-commands:
    desc: Copy commands from repository to user directory
    vars:
      USER_COMMANDS_DIR_EXPANDED:
        sh: realpath {{.USER_COMMANDS_DIR}}
    cmds:
      - for file in {{.REPO_COMMANDS_DIR}}/*.md; do ln -sf "$file" {{.USER_COMMANDS_DIR_EXPANDED}}/; done
